{
    // testedfiles: Snapper.ycp

    import "Snapper";
    import "Testsuite";

    map READ	= $[
	"snapper"	: $[
	    "path"	: "/snapshots/1/snapshot"
	],
	"target"	: $[
	    "stat"	: $[
		1 : 2
	    ]
	],
    ];
    map EX	= $[
	"target"	: $[
	    "bash_output"	: $[
		"stderr"	: "error while diffing"
	    ]
	],
    ];
    Testsuite::Test (``(Snapper::GetFileModification ("/etc/passwd", 1, 0)), [ READ, $[], EX ], 0);

    EX["target","bash_output"]	= $[
	"stdout"	: "+new user line"
    ];
    // status map is wrong, due to 2 calls of target.bash_output with same result...
    Testsuite::Test (``(Snapper::GetFileModification ("/etc/passwd", 1, 2)), [ READ, $[], EX ], 0);

    READ["target","stat"]	= $[];

    Testsuite::Test (``(Snapper::GetFileModification ("/etc/passwd", 1, 2)), [ READ, $[], EX ], 0);
}
